﻿<mah:MetroWindow  x:Class="CalendarAppWPF.Views.WindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:views="clr-namespace:CalendarAppWPF.Views"
        xmlns:local="clr-namespace:CalendarAppWPF"
        xmlns:viewmodel="clr-namespace:CalendarAppWPF.ViewModels"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        d:DataContext="{d:DesignInstance Type=viewmodel:WindowViewModel}"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        SaveWindowPosition="True"
        GlowBrush="{DynamicResource AppPrimary}"
        BorderThickness="1"
        BorderBrush="{DynamicResource AppPrimary}"
        TitleCharacterCasing="Normal"
        ResizeMode="CanResizeWithGrip"
        Title="Takvim Uygulaması"
        TitleBarHeight="28"
        WindowState="Maximized"
        Height="800" Width="1200">

    <mah:MetroWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </mah:MetroWindow.Resources>
    
    <mah:MetroWindow.TitleTemplate>
        <DataTemplate>
            <TextBlock Text="{TemplateBinding Content}" Foreground="White" FontSize="16" FontWeight="Light" Margin="6 0 0 0" VerticalAlignment="Center"/>
        </DataTemplate>
    </mah:MetroWindow.TitleTemplate>

    <mah:MetroWindow.WindowTitleBrush>
        <SolidColorBrush Color="#6200EE"/>
    </mah:MetroWindow.WindowTitleBrush>

    <mah:MetroWindow.NonActiveWindowTitleBrush>
        <SolidColorBrush Color="#6200EE"/>
    </mah:MetroWindow.NonActiveWindowTitleBrush>

    <mah:MetroWindow.NonActiveGlowBrush>
        <SolidColorBrush Color="#6200EE"/>
    </mah:MetroWindow.NonActiveGlowBrush>

    <mah:MetroWindow.NonActiveBorderBrush>
        <SolidColorBrush Color="#6200EE"/>
    </mah:MetroWindow.NonActiveBorderBrush>

    <mah:MetroWindow.IconTemplate>
        <DataTemplate>
            <Image Width="20" Height="20" Stretch="Uniform">
                <Image.Source>
                    <BitmapImage UriSource="pack://application:,,,/Assets/Png/Application.png" />
                </Image.Source>
            </Image>
        </DataTemplate>
    </mah:MetroWindow.IconTemplate>

    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands>
            <Button Content="📅 Takvim" Click="ShowCalendar">
                <Button.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="6 0 0 0" VerticalAlignment="Center" Text="{Binding}" Foreground="White" FontSize="16" FontWeight="Light" />
                        </StackPanel>
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>
            <Button Content="⚙️ Ayarlar" Click="ShowSettings">
                <Button.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="6 0 0 0" VerticalAlignment="Center" Text="{Binding}" Foreground="White" FontSize="16" FontWeight="Light" />
                        </StackPanel>
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>
        </mah:WindowCommands>
    </mah:MetroWindow.RightWindowCommands>

    <mah:MetroWindow.WindowButtonCommands>
        <mah:WindowButtonCommands Style="{DynamicResource CustomWindowButtonCommandsStyleLocatedtInAppXaml}"/>
    </mah:MetroWindow.WindowButtonCommands>

   <DockPanel Background="{DynamicResource AppBackground}">

       <Menu DockPanel.Dock="Top" Background="{DynamicResource AppSurface}">
           <MenuItem Header="_Dosya">
               <MenuItem Header="_Yeni Etkinlik" Click="NewEvent_Click"/>
               <MenuItem Header="_İçe Aktar"/>
               <MenuItem Header="_Dışa Aktar"/>
               <Separator />
               <MenuItem Header="_Çıkış" Click="Exit_Click"/>
           </MenuItem>
           <MenuItem Header="_Görünüm">
               <MenuItem Header="_Günlük Görünüm" Click="DayView_Click"/>
               <MenuItem Header="_Haftalık Görünüm" Click="WeekView_Click"/>
               <MenuItem Header="_Aylık Görünüm" Click="MonthView_Click"/>
               <Separator />
               <MenuItem Header="_Karanlık Mod" IsCheckable="True" Click="ToggleDarkMode_Click"/>
           </MenuItem>
           <MenuItem Header="_Araçlar">
               <MenuItem Header="_Bildirim Testi" Click="TestNotification_Click"/>
               <MenuItem Header="_Ayarlar" Click="ShowSettings"/>
           </MenuItem>
           <MenuItem Header="_Yardım">
               <MenuItem Header="_Hakkında" Click="About_Click"/>
               <MenuItem Header="_GitHub'da Görüntüle" Click="GoToSource"/>
           </MenuItem>
       </Menu>

       <StatusBar DockPanel.Dock="Bottom" Background="{DynamicResource AppSurface}">
            <StatusBarItem Content="{Binding Path=StatusBar, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding Source={x:Static System:DateTime.Now}, StringFormat='dd.MM.yyyy HH:mm'}" 
                          Foreground="{DynamicResource AppOnSurface}"/>
            </StatusBarItem>
       </StatusBar>

       <!-- Main Calendar Content -->
       <views:CalendarView x:Name="MainCalendarView" />

   </DockPanel>

</mah:MetroWindow>
